<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Đi muôn nơi</title>
    <link rel="icon" type="image/x-icon" href="" />
    <!-- Google fonts-->
    <link
      href="https://fonts.googleapis.com/css?family=Raleway:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      integrity="sha384-k6RqeWeci5ZR/Lv4MR0sA0FfDOMpM/lV4y3nNZ2D9Uemw3M/1XMQ7iwgM8tTgF8"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />

    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
    <link rel="icon" type="image/x-icon" href="img/image.png" />

    <style>

      #canvas-container {
            width: 100%;
            max-width: 800px;
            height: auto;
            aspect-ratio: 1 / 1;
            border: 2px dashed #ccc;
            position: relative;
            overflow: hidden;
            background-size: cover;
            background-position: center;
            margin: 0 auto;
            /* background-image: url('https://th.bing.com/th/id/OIP.FEa-cOO8qehce6lOIOQGlwHaHa?w=185&h=185&c=7&r=0&o=5&dpr=1.3&pid=1.7'); */
  background-size: cover;
  background-position: center;
        }



      .draggable {
        position: absolute;
        cursor: move;
      }
      .image-selection img {
        width: 100px;
        margin: 5px;
        cursor: pointer;
      }


      .circle-buttons {
        position: fixed;
        /* Đặt vị trí cố định */
        top: 20px;
        /* Khoảng cách từ đỉnh màn hình */
        right: 20px;
        /* Khoảng cách từ bên phải màn hình */
        z-index: 1000;
        /* Đặt z-index cao để chúng luôn hiển thị trên cùng */
        display: flex;
        /* Sử dụng flex để sắp xếp các button */
        flex-direction: column;
        /* Sắp xếp theo chiều dọc */
        gap: 10px;
        /* Khoảng cách giữa các button */
      }

      .circle-button {
        width: 60px;
        /* Đường kính hình tròn */
        height: 60px;
        /* Đường kính hình tròn */
        border-radius: 50%;
        /* Tạo hình tròn */
        background-color: rgb(0 0 0 / 50%);
        /* Màu nền */
        color: white;
        /* Màu chữ */
        display: flex;
        /* Hiển thị dưới dạng flex để căn giữa */
        justify-content: center;
        /* Căn giữa nội dung theo chiều ngang */
        align-items: center;
        /* Căn giữa nội dung theo chiều dọc */
        text-decoration: none;
        /* Xóa gạch chân */
        font-size: 11px;
        /* Kích thước chữ */
        text-transform: uppercase;
      }

      .fb-button {
        /* Đường kính hình tròn */

        /* Đường kính hình tròn */

        /* Tạo hình tròn */

        /* Màu nền */
        color: rgb(26, 34, 255);
        /* Màu chữ */
        display: flex;
        /* Hiển thị dưới dạng flex để căn giữa */
        justify-content: center;
        /* Căn giữa nội dung theo chiều ngang */
        align-items: center;
        /* Căn giữa nội dung theo chiều dọc */
        text-decoration: none;
        /* Xóa gạch chân */
        font-size: 20px;
        /* Kích thước chữ */
        text-transform: uppercase;
      }

      .circle-button:hover {
        background-color: #0056b3;
        /* Màu nền khi hover */
      }

      /* Ẩn navbar khi màn hình nhỏ */
      @media (max-width: 992px) {
        .navbar-nav {
          display: none;
          /* Ẩn các mục trong navbar */
        }

        .navbar-toggler {
          display: none;
          /* Ẩn nút toggle */
        }
      }

      p {
        word-break: break-word;
      }

      .section-heading {
        transition: color 0.3s ease, transform 0.7s ease;
        /* Thêm hiệu ứng chuyển tiếp cho màu sắc và kích thước */
      }

      .section-heading:hover {
        color: #0056b3;
        /* Đổi màu khi hover */
        transform: scale(1.1);
        /* Tăng kích thước khi hover */
      }

      .logo-image {
        width: 50px;
        /* Kích thước logo nhỏ */
        height: 50px;
        /* Kích thước logo nhỏ */
        border-radius: 50%;
        /* Làm tròn */
        margin-right: 5px;
        /* Khoảng cách giữa logo và tên */
        object-fit: cover;
        /* Đảm bảo hình ảnh không bị méo */
        vertical-align: middle;
        /* Căn giữa logo với văn bản */
      }
    </style>
  </head>
  <body>
    <header>
        <h1 class="site-heading text-center text-faded d-none d-lg-block">
            <img src="img/logo.png" alt="Logo" class="logo-image">
            <span class="site-heading-upper text-primary mb-3" style="margin-top: 5px;">Đi Muôn Nơi</span>
            <span class="site-heading-lower">Cần Thơ</span>

        </h1>
    </header>
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-dark py-lg-4" id="mainNav">

        <div class="container">
            <a class="navbar-brand text-uppercase fw-bold d-lg-none" style="margin-left: 10px;" href="index.html">
                <img src="img/logo.png" alt="Logo" class="logo-image"> Đi Muôn Nơi
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSuppo     rtedContent"
                aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item px-lg-4"><a class="nav-link text-uppercase" href="index.html">Home</a></li>
                    <li class="nav-item px-lg-4"><a class="nav-link text-uppercase" href="eat.html">Junket</a></li>
                    <li class="nav-item px-lg-4"><a class="nav-link text-uppercase" href="hotel.html">Hotel</a></li>
                    <li class="nav-item px-lg-4"><a class="nav-link text-uppercase" href="more.html">Location</a></li>
                    <li class="nav-item px-lg-4"><a class="nav-link text-uppercase" href="meoDuLich.html">Tips</a>
                        <li class="nav-item px-lg-4"><a class="nav-link text-uppercase" href="design.html">Design</a>
                    <li class="nav-item px-lg-4">
                        <a class="nav-link" href="https://www.facebook.com/profile.php?id=61567367394026"
                            target="_blank" style="color: rgb(26, 34, 255);">
                            <i class="fa-brands fa-facebook"></i>
                        </a>
                    </li>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="circle-buttons d-lg-none">
        <a href="index.html" class="circle-button">Home</a>
        <a href="eat.html" class="circle-button">Junket</a>
        <a href="hotel.html" class="circle-button">Hotel</a>
        <a href="more.html" class="circle-button">Location</a>
        <a href="meoDuLich.html" class="circle-button">Tips</a>
        <a href="design.html" class="circle-button">Design</a>
        <a href="https://www.facebook.com/profile.php?id=61567367394026" class="fb-button"> <i
                class="fa-brands fa-facebook"></i></a>
    </div>


    <div class="image-selection">
      <img
      src="https://th.bing.com/th/id/OIP.tmfa5CnxXEh0J5cNLNWVKwHaEK?w=272&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7"
      onclick="addPresetImage(this.src)"
      />
      <img
        src="https://th.bing.com/th/id/OIP.tmfa5CnxXEh0J5cNLNWVKwHaEK?w=272&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7"
        onclick="addPresetImage(this.src)"
      />
      <img
        src="https://salt.tikicdn.com/cache/280x280/ts/product/70/5a/d8/f52a43cf20620e99becdc45516a1bfa8.jpg"
        onclick="addPresetImage(this.src)"
      />
    </div>
    <input type="file" id="upload" accept="image/*" />
    <button onclick="addText()">Thêm Chữ</button>
    <button onclick="exportImage()">Xuất ảnh</button>

    <button onclick="deleteSelectedImage()">Xóa hình</button>




    <div id="canvas-container"></div> <canvas
      id="exportCanvas"
      width="800"
      height="500"
      style="display: none"
    
    ></canvas>

    <script>
let selectedElement = null;

document.getElementById("canvas-container").addEventListener("click", function (event) {
    if (event.target.tagName === "IMG") {
        if (selectedElement) {
            selectedElement.style.border = "none";
        }
        selectedElement = event.target;
        selectedElement.style.border = "2px solid red";
    }
});

function deleteSelectedImage() {
    if (selectedElement) {
        selectedElement.remove();
        selectedElement = null;
    }
}

let isDragging = false;

document.addEventListener("dragstart", function () {
  isDragging = true;
  document.body.style.overflow = "hidden"; // Ngăn cuộn trang khi kéo
});

document.addEventListener("dragend", function () {
  isDragging = false;
  document.body.style.overflow = ""; // Cho phép cuộn lại khi thả
});

// Ngăn cuộn trên điện thoại khi kéo thả
document.addEventListener(
  "touchmove",
  function (event) {
    if (isDragging) {
      event.preventDefault();
    }
  },
  { passive: false }
);



      document
        .getElementById("upload")
        .addEventListener("change", function (event) {
          const file = event.target.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
              addPresetImage(e.target.result);
            };
            reader.readAsDataURL(file);
          }
        });

      function loadImageFromUrl(url, callback) {
        fetch(url)
          .then((response) => response.blob())
          .then((blob) => {
            const reader = new FileReader();
            reader.onloadend = () => {
              callback(reader.result); // trả về base64
            };
            reader.readAsDataURL(blob);
          })
          .catch((err) => console.error("Lỗi tải hình ảnh URL:", err));
      }

      function addPresetImage(src) {
    const img = document.createElement("img");

    if (src.startsWith("http")) {
        // tải ảnh từ URL dạng base64
        loadImageFromUrl(src, (base64) => {
            img.src = base64;
            img.classList.add("draggable");

            // Kiểm tra nếu là ảnh cần phóng to
            if (src.includes("f52a43cf20620e99becdc45516a1bfa8.jpg")) {
                img.style.width = "100%";
                img.style.height = "100%";
                img.style.position = "absolute";
                img.style.top = "0";
                img.style.left = "0";
            } else {
                img.style.width = "150px";
                img.style.top = "10px";
                img.style.left = "10px";
            }

            makeDraggable(img);
            document.getElementById("canvas-container").appendChild(img);
        });
    } else {
        // file tải lên từ máy tính
        img.src = src;
        img.classList.add("draggable");

        if (src.includes("f52a43cf20620e99becdc45516a1bfa8.jpg")) {
            img.style.width = "100%";
            img.style.height = "100%";
            img.style.position = "absolute";
            img.style.top = "0";
            img.style.left = "0";
        } else {
            img.style.width = "150px";
            img.style.top = "10px";
            img.style.left = "10px";
        }

        makeDraggable(img);
        document.getElementById("canvas-container").appendChild(img);
    }
}



    function addText() {
            const textDiv = document.createElement("div");
            textDiv.contentEditable = true;
            textDiv.textContent = "Nhập chữ tại đây";
            textDiv.classList.add("draggable");
            textDiv.style.position = "absolute";
            textDiv.style.top = "50px";
            textDiv.style.left = "50px";
            textDiv.style.fontSize = "20px";
            textDiv.style.color = "black";
            
            const colorInput = document.createElement("input");
            colorInput.type = "color";
            colorInput.value = "#000000";
            colorInput.style.position = "absolute";
            colorInput.style.top = "0";
            colorInput.style.left = "100%";
            colorInput.addEventListener("input", (event) => {
                textDiv.style.color = event.target.value;
            });
            
            textDiv.appendChild(colorInput);
            document.getElementById("canvas-container").appendChild(textDiv);
             makeDraggable(textDiv);
        }




      function makeDraggable(element) {
        let offsetX,
          offsetY,
          isDragging = false;

        // chạm bằng chuột máy tính
        element.addEventListener("mousedown", (e) => {
          isDragging = true;
          offsetX = e.clientX - element.offsetLeft;
          offsetY = e.clientY - element.offsetTop;
        });

        //chạm trên điện thoại
        element.addEventListener("touchstart", (e) => {
          isDragging = true;
          const touch = e.touches[0];
          offsetX = touch.clientX - element.offsetLeft;
          offsetY = touch.clientY - element.offsetTop;
        });

        // di chuyển
        document.addEventListener("mousemove", (e) => {
          if (isDragging) {
            element.style.left = e.clientX - offsetX + "px";
            element.style.top = e.clientY - offsetY + "px";
          }
        });

        // di chuyển trên điện thoại
        document.addEventListener("touchmove", (e) => {
          if (isDragging) {
            const touch = e.touches[0];
            element.style.left = touch.clientX - offsetX + "px";
            element.style.top = touch.clientY - offsetY + "px";
          }
        });

        // dừng kéo thả
        document.addEventListener("mouseup", () => {
          isDragging = false;
        });

        // dừng kéo thả trên điện thoại
        document.addEventListener("touchend", () => {
          isDragging = false;
        });
      }

      function exportImage() {
        const canvas = document.getElementById("exportCanvas");
        const ctx = canvas.getContext("2d");
        const container = document.getElementById("canvas-container");

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        const elements = Array.from(container.children);
        elements.forEach((element) => {
          if (element.tagName === "IMG") {
            ctx.drawImage(
              element,
              parseInt(element.style.left),
              parseInt(element.style.top),
              element.width,
              element.height
            );
          } else if (element.contentEditable === "true") {
            ctx.font = `${element.style.fontSize} Arial`;
            ctx.fillStyle = element.style.color;
            ctx.fillText(
              element.textContent,
              parseInt(element.style.left),
              parseInt(element.style.top) + parseInt(element.style.fontSize)
            );
          }
        });

        setTimeout(() => {
          const link = document.createElement("a");
          link.download = "dimuonnoi.png";
          link.href = canvas.toDataURL("image/png");
          link.click();
        }, 500);
      }


    </script>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Bootstrap CSS -->

<!-- jQuery and Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<!-- Core theme JS-->
<script src="js/scripts.js"></script>

  </body>
</html>
